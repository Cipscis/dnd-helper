<html>
	<head>
		<title>D&amp;D Combat Helper</title>

		<link rel="stylesheet" href="/assets/css/style.css" />

		<script type="text/javascript" src="/assets/js/lib/require.js"></script>
		<script type="text/javascript" src="/assets/js/lib/require-config.js"></script>

		<script type="text/javascript">
			require([
				'initiative',
				'drag-sort'
			],
			function (Initiative, DragSort) {
				Initiative.init();
				DragSort.init();
			});
		</script>
	</head>

	<body>
		<div class="body">

			<h1>D&amp;D Combat Helper</h1>

			<div class="grid">
				<div class="grid__item width-1 width-md-1-2 width-l-1-3 width-xl-1-4">
					<form class="initiative__form pod js-initiative__form">
						<ul class="grid-v--tight">
							<li class="grid__item">
								<input type="text" name="name" placeholder="Name" class="editable" required />
							</li>
							<li class="grid__item">
								<input type="number" name="initiative" placeholder="Initiative" class="editable" required />
							</li>
							<li class="grid__item">
								<label>Player <input type="radio" name="team" value="initiative__item--player" checked /></label>
								<label>Enemy <input type="radio" name="team" value="initiative__item--enemy" /></label>
							</li>
							<li class="grid__item">
								<input type="number" name="hp" placeholder="HP" class="editable" />
							</li>
							<li class="grid__item">
								<button type="submit">Add</button>
							</li>
						</ul>
					</form>
				</div>
			</div>

			<div class="initiative__global-controls pod pod--border">
				<button class="js-initiative__next">Next Turn</button>
			</div>

			<script type="x-js-template" class="js-initiative__template">
				<li class="grid__item js-initiative__item js-drag-sort-wrap" data-initiative="{{initiative}}">
					<div class="initiative__item pod pod--loose {{team}} js-drag-sort-item" draggable="true">
						<div class="initiative__controls">
							<span class="initiative__current js-initiative__select"></span>
							<span class="initiative__remove js-initiative__remove"></span>
							<span class="initiative__up js-initiative__up"></span>
							<span class="initiative__down js-initiative__down"></span>
						</div>

						<div class="grid grid-v">
							<div class="grid__item width-1 width-l-1-2">
								<h2 class="initiative__name">{{name}} ({{initiative}})</h2>

								{{#hasHp}}
									<p class="initiative__health"><label>Health <span class="editable" contenteditable="true">{{hp}}</span></label> / {{hp}}</p>
								{{/hasHp}}

								<div class="initiative__notes editable" contenteditable="true"></div>

								<div class="initiative__counter-list js-initiative__counter-list"></div>
							</div>

							<div class="grid__item width-1 width-l-1-2">
								<form class="initiative__counter-form js-initiative__counter-form">
									<ul class="grid-v--tight">
										<li class="grid__item">
											<input type="text" placeholder="Counter" name="name" required class="editable js-initiative__counter-name" />
										</li>
										<li class="grid__item">
											<input type="number" placeholder="Duration" name="duration" required class="editable js-initiative__counter-length" />
										</li>
										<li class="grid__item">
											<textarea placeholder="Description" name="description" class="editable js-initiative__counter-description"></textarea>
										</li>
										<li class="grid__item">
											<button type="submit">Add Counter</button>
										</li>
									</ul>
								</form>
							</div>
						</div>
					</div>
				</li>
			</script>

			<script type="x-js-template" class="js-initiative__counter-template">
				<div class="initiative__counter js-initiative__counter">
					<span class="initiative__counter-remove js-initiative__counter-remove"></span>

					<input type="number" value="{{duration}}" class="editable initiative__counter-duration js-initiative__counter-duration" />
					<div class="initiative__counter-details">
						<span class="initiative__counter-name">{{name}}</span>
						<span class="initiative__counter-description editable" contenteditable="true">{{description}}</span>
					</div>
				</div>
			</script>

			<div class="initiative__list">
				<ol class="grid-v--tight js-initiative__list js-drag-sort-list"></ol>
			</div>

		</div>
	</body>
</html>