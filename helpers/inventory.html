<html>
	<head>
		<title>D&amp;D Inventory</title>

		<link rel="stylesheet" href="/assets/css/style.css" />

		<script type="text/javascript" src="/assets/js/lib/require.js"></script>
		<script type="text/javascript" src="/assets/js/lib/require-config.js"></script>

		<script type="text/javascript">
			require([
				'inventory',
				'drag-sort',
				'expand-collapse'
			],
			function (Inventory, DragSort, ExpandCollapse) {
				Inventory.init();
				DragSort.init();
				ExpandCollapse.init();
			});
		</script>
	</head>

	<body>
		<div class="body">

			<h1>D&amp;D Inventory</h1>

			<form class="grid--tight grid-v--tight js-inventory-load">
				<div class="grid__item">
					<input type="text" class="editable" name="filename" required />
				</div>
				<div class="grid__item">
					<button type="submit">Load</button>
				</div>
				<div class="grid__item width-1 form__error js-inventory-load-error" style="display: none;"></div>
			</form>

			<script type="x-js-template" class="js-inventory-template">
				<ul class="inventory-coins pod pod--tight">
					{{#coins}}
						<li>
							<span class="coin coin--{{type}}"></span> <input type="number" class="editable js-coin" data-inventory-coin-type="{{type}}" contenteditable="true" value="{{quantity}}" />
						</li>
					{{/coins}}
				</ul>

				<div class="grid-v--tight">
					<div class="grid__item">
						<ul class="grid--tight grid-v--tight js-inventory-items js-drag-sort-list">
							{{#items}}
								{{> itemTemplate}}
							{{/items}}
						</ul>
					</div>

					<div class="grid__item">
						<ul class="grid--tight grid-v--tight">
							<li class="grid__item">
								<form class="inventory-item js-inventory-add">
									<div class="grid grid--tight grid-v grid-v--tight">
										<div class="grid__item">
											<input type="text" class="editable" name="name" required />
										</div>
										<div class="grid__item">
											<button type="submit">Add Item</button>
										</div>
								</form>
							</li>
							<li class="grid__item">
								<button class="js-inventory-save">Save</button>
							</li>
						</ul>
					</div>
				</div>
			</script>

			<script type="x-js-template" class="js-inventory-item-template">
				<li class="grid__item width-1 width-md-1-2 width-l-1-3 width-xl-1-4 js-inventory-item js-drag-sort-wrap">
					<div class="inventory-item pod pod--tight expand-collapse js-expand-collapse js-drag-sort-item" draggable="true">
						<a href="#" class="inventory-item__remove js-inventory-remove"></a>

						<div class="expand-collapse__heading inventory-item__heading js-expand-collapse__trigger"><span data-inventory-item-value="name">{{name}}</span> x<span data-inventory-item-value="quantity">{{quantity}}</span></div>

						<div class="inventory-item__details expand-collapse__body js-expand-collapse__body">
							<ul class="grid-v--tight">
								<li class="grid__item">
									<label>
										Name
										<input type="text" class="editable" spellcheck="false" value="{{name}}" name="name" />
									</label>
								</li>
								<li class="grid__item">
									<label>
										Description
										<textarea class="editable" spellcheck="false" name="description">{{description}}</textarea>
									</label>
								</li>
								<li class="grid__item">
									<div class="grid">
										<label class="grid__item width-1-2">
											Weight
											<input type="number" class="editable" value="{{weight}}" name="weight" />
										</label>
										<label class="grid__item width-1-2">
											Quantity
											<input type="number" class="editable" value="{{quantity}}" name="quantity" />
										</label>
									</div>
								</li>
							</ul>
						</div>
					</div>
				</li>
			</script>

			<div class="js-inventory"></div>

		</div>
	</body>
</html>